class EntityStatsElement{get s(){return{trigger_rating:".js-entity__rating",data:{id:"data-entity-id",type:"data-entity-type",disable:"data-entity-disable"}}}constructor(t){this.element=t,this.id,this.type,this.rating,this.disabled=[]}init(){this._checkDisabledStats(),this.id=parseInt(this.element.getAttribute(this.s.data.id)),this.type=this.element.getAttribute(this.s.data.type),this.controller=this.element.getAttribute(this.s.data.ctrl),this.rating=new EntityStatsRating(this)}_checkDisabledStats(){let t=this.element.getAttribute(this.s.data.disable);t&&(this.disabled=t.split(new RegExp(",s*")))}statEnabled(t){return!this.disabled.includes(t)}onload(){this.rating.init()}async makeRequest(t){return t.id=this.id,t.type=this.type,t.method="update",await this._sendRequest(t)}async _sendRequest(t){let e=!1;return await fetch("/ajax/entity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{!t.status||t.status<200||t.status>299?console.warn(t):e=!0})).catch((t=>{console.warn(t)})),e}}