class EntityStatsViews{get s(){return{trigger:".js-entity__views",interval:15}}constructor(t){this.ctl=t,this.element=this.ctl.element.querySelector(this.s.trigger),this.status=!(!this.element||!this.ctl.statEnabled("views")),this.count=this._getCount(),this.timestamp=parseInt(localStorage.getItem("entity-"+this.ctl.id+"-last-view-uptime")??0)}_getCount(){return this.status?parseInt(this.element.innerText):null}update(){if(!this.status||!this._updateAvailable())return;this._updateViewTime(),this.ctl.makeRequest({fn:"update",key:"views"})}_updateAvailable(){return!this.timestamp||this.s.interval<Math.floor(Date.now()/1e3)-this.timestamp}_updateViewTime(){let t=Math.floor(Date.now()/1e3);localStorage.setItem("entity-"+this.ctl.id+"-last-view-uptime",t)}}