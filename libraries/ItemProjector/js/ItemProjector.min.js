class ItemProjector{constructor(){this.s={trigger_list:".js-item-projector__list",trigger_item:".js-item-projector__item",attr_data_prefix:"data-item-project-",id_prefix:"item-project--",projector_class:"projected",options:{item:[{name:"remove-class",method:"_itemRemoveClass"}]}},this.lists=[]}init(){let t=document.querySelectorAll(this.s.trigger_list);if(!(t.length<1)){for(let e of t){let t=e.querySelectorAll(this.s.trigger_item),s=e.getAttribute("data-item-project-placeholder"),i=document.getElementById(s);t.length<1||!i||this.lists.push(new ItemProjectorList(e,t,i))}this.lists.length<1||(this._initializeItemClickEvent(),this._startProjectingRandomItems())}}_initializeItemClickEvent(){for(let t=0;t<this.lists.length;t++)for(let e=0;e<this.lists[t].items.length;e++)this.lists[t].items[e].addEventListener("click",(()=>{this._projectItem(this.lists[t],e,!0)}))}_projectItem(t,e,s=!1){let i=t.items[e].cloneNode(!0);for(let t=0;t<this.s.options.item.length;t++){let e=this.s.options.item[t];for(let t=0;t<i.children.length;t++)this._preproccessItemCloneDataAttribute(i.children[t],e),this._preproccessItemCloneId(i.children[t]);this._preproccessItemCloneDataAttribute(i,e),this._preproccessItemCloneId(i)}this._setOldProjectorClass(t),t.items[e].classList.contains(this.s.projector_class)||t.items[e].classList.add(this.s.projector_class),t.projectNewItem(i,e,s)}_preproccessItemCloneDataAttribute(t,e){let s=this.s.attr_data_prefix+e.name,i=t.getAttribute(s);i&&(t.removeAttribute(s),this[e.method](t,i))}_preproccessItemCloneId(t){t.id&&(t.id=this.s.id_prefix+t.id)}_setOldProjectorClass(t){t.projected_item<0||t.items[t.projected_item].classList.contains(this.s.projector_class)&&t.items[t.projected_item].classList.remove(this.s.projector_class)}_itemRemoveClass(t,e){e=e.replace(" ","").split(",");for(let s=0;s<e.length;s++)t.classList.contains(e[s])&&t.classList.remove(e[s])}_startProjectingRandomItems(){for(let t=0;t<this.lists.length;t++)this._projectRandomListItem(this.lists[t]),this.lists[t].setRandomProjectionTimer((()=>{this._projectRandomListItem(this.lists[t])}))}_projectRandomListItem(t){let e=t.newRandomItemIndex();this._projectItem(t,e)}}