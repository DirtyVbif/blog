"use strict";class BackToTop{constructor(){this.s={class:"js-back-to-top",offsetY:200},this.btt_btn,this.activated=!1}set(){this.btt_btn=document.createElement("button"),this.btt_btn.setAttribute("id","back-to-top"),this.btt_btn.setAttribute("aria-label","наверх"),this.btt_btn.classList.add(this.s.class),document.body.appendChild(this.btt_btn),this._activate(),document.addEventListener("scroll",(t=>{this._activate()})),this.btt_btn.addEventListener("click",(t=>{this._scrollToTop()}))}_activate(){window.scrollY<this.s.offsetY?this._deactivate():(this.activated=!0,this.btt_btn.classList.contains("hidden")&&this.btt_btn.classList.remove("hidden"))}_deactivate(){this.activated=!1,this.btt_btn.classList.contains("hidden")||this.btt_btn.classList.add("hidden")}_reactivate(){window.scrollY<this.s.offsetY&&this.activated?this._deactivate():window.scrollY>=this.s.offsetY&&!this.activated&&this._activate()}_scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}class CookieAgreement{constructor(){this.s={trigger:"#cookie-agreement",hidden_class:"hidden",ajax_path:"/ajax/cookie",show_times:3},this.modal,this.window_resize_event,this.submit,this.form}initialize(){this.modal=document.querySelector(this.s.trigger),this.form=document.querySelector(this.s.trigger+" form"),this.submit=document.querySelector(this.s.trigger+' form input[type="submit"]'),this.modal&&this.form&&this.submit&&(isCookieAccepted()?this._setAsAccepted():this._createEvent())}_createEvent(){let t=localStorage.getItem("cookie-agreement-show-times")??0;if(t="NaN"==parseInt(t)?this.s.show_times:parseInt(t),t>this.s.show_times)return this._setAsAccepted();localStorage.setItem("cookie-agreement-show-times",++t),this.modal.classList.remove(this.s.hidden_class),this._setBottomOffset(),this.submit.addEventListener("click",(t=>{this._acceptCookies(t)}))}_setBottomOffset(){this._setDocumentBottomOffset(),window.addEventListener("resize",(t=>{this.window_resize_event=t,this._setDocumentBottomOffset()}))}_setDocumentBottomOffset(t=!1){let e=null;t||(e=parseFloat(this.modal.offsetHeight)+"px"),document.body.style.marginBottom=e}_removeBottomOffset(){this.window_resize_event&&window.removeEventListener("resize",this.window_resize_event),this._setDocumentBottomOffset(!0)}_acceptCookies(t){t.preventDefault(),this._removeBottomOffset(),this._setAsAccepted()}_setAsAccepted(){localStorage.setItem("cookie-agreement-accepted",1),this.modal.remove();let t=new FormData(this.form);fetch(this.s.ajax_path,{method:"post",body:t}).then((t=>t.json())).then((t=>console.log(t))).catch((t=>console.warn(t)))}}class SkillSlider{constructor(){this.s={trigger:".js-slider",item_prev:"left",item_next:"right",item_current:"middle",item_hidden:"hidden",control_prev:"prev",control_next:"next"},this.items=[],this.slider,this.btn_next,this.btn_prev,this.i,this.i_next,this.i_prev,this.event_prev,this.event_next}initialize(){this.slider=document.querySelector(this.s.trigger),this.slider&&(this.btn_next=this.slider.querySelector(this.s.trigger+"__control."+this.s.control_next),this.btn_prev=this.slider.querySelector(this.s.trigger+"__control."+this.s.control_prev),this.items=this.slider.querySelectorAll(this.s.trigger+"__item"),this._setCurrentIndex(),this._createEvents())}_setCurrentIndex(){for(let t=0;t<this.items.length;t++)if(this.items[t].classList.contains(this.s.item_current)){this.i=t;break}this._setCurrentSiblingsIndex()}_setCurrentSiblingsIndex(){this.i_prev=this._getPreviousIndex(),this.i_next=this._getNextIndex()}_setIndexToNext(){this.i=this._getNextIndex(),this._setCurrentSiblingsIndex()}_setIndexToPrevious(){this.i=this._getPreviousIndex(),this._setCurrentSiblingsIndex()}_getPreviousIndex(){return this.i<=0?this.items.length-1:this.i-1}_getNextIndex(){return this.i>=this.items.length-1?0:this.i+1}_createEvents(){this.btn_next.addEventListener("click",(t=>{this._slideSkillToNext()})),this.btn_prev.addEventListener("click",(t=>{this._slideSkillToPrevious()})),this._setSkillSlideClickEvent()}_slideSkillToNext(){this._removeSkillSlideClickEvents(),this._removeClassesFromCurrentItems(),this._setIndexToNext(),this._addClassesToCurrentItems(),this._setSkillSlideClickEvent()}_slideSkillToPrevious(){this._removeSkillSlideClickEvents(),this._removeClassesFromCurrentItems(),this._setIndexToPrevious(),this._addClassesToCurrentItems(),this._setSkillSlideClickEvent()}_removeSkillSlideClickEvents(){this.event_prev&&this.items[this.i_prev].removeEventListener("click",this.event_prev),this.event_next&&this.items[this.i_next].removeEventListener("click",this.event_next)}_setSkillSlideClickEvent(){this.items[this.i_prev].addEventListener("click",this.event_prev=t=>{this._slideSkillToPrevious()}),this.items[this.i_next].addEventListener("click",this.event_next=t=>{this._slideSkillToNext()})}_removeClassesFromCurrentItems(){this.items[this.i_prev].classList.remove(this.s.item_prev),this.items[this.i_prev].classList.add(this.s.item_hidden),this.items[this.i].classList.remove(this.s.item_current),this.items[this.i].classList.add(this.s.item_hidden),this.items[this.i_next].classList.remove(this.s.item_next),this.items[this.i_next].classList.add(this.s.item_hidden)}_addClassesToCurrentItems(){this.items[this.i_prev].classList.remove(this.s.item_hidden),this.items[this.i].classList.remove(this.s.item_hidden),this.items[this.i_next].classList.remove(this.s.item_hidden),this.items[this.i].classList.contains(this.s.item_current)||this.items[this.i].classList.add(this.s.item_current),this.items[this.i_prev].classList.contains(this.s.item_prev)||this.items[this.i_prev].classList.add(this.s.item_prev),this.items[this.i_next].classList.contains(this.s.item_next)||this.items[this.i_next].classList.add(this.s.item_next)}}